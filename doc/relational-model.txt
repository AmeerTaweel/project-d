CREATE TABLE Employee(
    fname:            CHAR(30),
    lname:            CHAR(30),
    governmental_id:  INTEGER,
    id:               INTEGER,
    username:         CHAR(30),
    password:         CHAR(30),
    title:            CHAR(30),
    salary:           INTEGER,
    e-mail:           CHAR(30),
    phone_no:         CHAR(30),
    personal_img:     CHAR(30),
    sex:              CHAR(6),
    dob:              CHAR(10),
    PRIMARY KEY (id),
    department_id:       INTEGER,
    FOREIGN KEY manager_id REFERENCES Department,
    supervisor_id     INTEGER,
    FOREIGN KEY supervisor_id REFERENCES Employee)

CREATE TABLE Department(
    id:               INTEGER,
    name:             CHAR(30),
    PRIMARY KEY (id),
    manager_id:      INTEGER,
    FOREIGN KEY employee_id REFERENCES Employee)

CREATE TABLE Job_Post(
    id:               INTEGER,
    title:            CHAR(30),
    description:      CHAR(30),
    requirements:     CHAR(30),
    post_date:        TIMESTAMP, 
    status:           CHAR(30),
    PRIMARY KEY (id),
    department_id:    INTEGER,
    FOREIGN KEY department_id REFERENCES Department)

CREATE TABLE Application(
    id:               INTEGER,
    fname:            CHAR(30),
    lname:            CHAR(30),
    cv:               CHAR(30),
    phone_no:         CHAR(30),
    e-mail:           CHAR(30),
    application_date: CHAR(30), 
    status:           CHAR(30),
    PRIMARY KEY (id),
    job_post_id:      INTEGER,
    FOREIGN KEY job_post_id REFERENCES Jop_Post)

CREATE TABLE Attendance(
    id:               INTEGER,
    timestamp:        TIMESTAMP,
    type:             CHAR(30),
    PRIMARY KEY (id, timestamp),
    FOREIGN KEY id REFERENCES Employee)

CREATE TABLE Employee_Roles(
    id:               INTEGER,
    role:             CHAR(30),
    PRIMARY KEY (id, role),
    FOREIGN KEY id REFERENCES Employee)

CREATE TABLE Item(
    id:               INTEGER,
    name:             CHAR(30),
    buy_price:        INTEGER,
    sell_price:       INTEGER,
    stock:            INTEGER,
    description:      CHAR(30),
    img:              CHAR(30),
    PRIMARY KEY (id),
    supplier_id:      INTEGER,
    FOREIGN KEY supplier_id REFERENCES Supplier)

CREATE TABLE Order(
    id:               INTEGER,
    PRIMARY KEY (id),
    transaction_id:   INTEGER,
    FOREIGN KEY transaction_id REFERENCES Transaction)

CREATE TABLE Transaction(
    id:               INTEGER,
    timestamp:        TIMESTAMP,
    delta:            FLOAT,
    PRIMARY KEY (id))

CREATE TABLE Purchase(
    id:               INTEGER,
    PRIMARY KEY (id),
    transaction_id:   INTEGER,
    FOREIGN KEY transaction_id REFERENCES Transaction,
    customer_id:      INTEGER,
    FOREIGN KEY customer_id REFERENCES Customer)

CREATE TABLE Customer(
    id:               INTEGER,
    name:             CHAR(30),
    phone_no:         CHAR(30),
    e-mail:           CHAR(30),
    PRIMARY KEY (id))

CREATE TABLE Supplier(
    id:               INTEGER,
    name:             CHAR(30),
    PRIMARY KEY (id))

CREATE TABLE Order_Items(
    item_id:          INTEGER,
    order_id:         INTEGER,
    count:            INTEGER,
    FOREIGN KEY item_id REFERENCES Item,
    FOREIGN KEY order_id REFERENCES Order,
    PRIMARY KEY (item_id, order_id))

CREATE TABLE Purchase_Items(
    item_id:          INTEGER,
    purchase_id:      INTEGER,
    count:            INTEGER,
    FOREIGN KEY item_id REFERENCES Item,
    FOREIGN KEY purchase_id REFERENCES Purchase,
    PRIMARY KEY (item_id, order_id))

CREATE TABLE Item_Category(
    id:               INTEGER,
    category:         CHAR(30),
    PRIMARY KEY (id, category),
    FOREIGN KEY id REFERENCES Item)
